@model IEnumerable<InlibrisVeritas.Models.Post>

@using Microsoft.AspNetCore.Identity

@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@{
    ViewData["Title"] = "Blogg";
}
    
    <div class="parallax"></div>
    <div class="blogg-div">
        <h2>Blogginlägg</h2>
        @foreach (var item in Model)
        {
            <img class="blogg-img" src="@Html.DisplayFor(modelItem => item.ImageUrl)" alt="bokbild" />
            <div class="blogg-text">
                <h3>@Html.DisplayFor(modelItem => item.Title)</h3>
                <p>@Html.DisplayFor(modelItem => item.Content)</p>
                <h4>Skriven av:  @Html.DisplayFor(modelItem => item.User.UserName)</h4>
                <h5>Datum:  @Html.DisplayFor(modelItem => item.Created)</h5>
                @if (SignInManager.IsSignedIn(User) && item.UserId == @ViewBag.userId)
                {
                    <div><a asp-action="Edit" asp-route-id="@item.PostId">Uppdatera</a></div>
                    <div><a asp-action="Delete" asp-route-id="@item.PostId">Delete</a></div>
                }
                <div><a asp-action="Details" asp-route-id="@item.PostId">Se inlägg</a></div>
            </div>
        }

        @if (SignInManager.IsSignedIn(User))
        {
            <div> <a asp-action="Create">Skriv nytt inlägg</a></div>
        }

    </div>
    <p>@ViewBag.userId</p>

